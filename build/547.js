"use strict";(globalThis.webpackChunkblock_collections=globalThis.webpackChunkblock_collections||[]).push([[547],{547:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var o=l(609),n=l(723),c=l(734),a=l(550),i=l(455),r=l.n(i),s=l(267),_=l(848),d=l(427),g=l(715),p=l(87),m=l(143),u=l(443);const b={top:"10px",left:"10px",right:"10px",bottom:"10px"},h=[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}],k=[{label:"YYYY-MM-DD HH:mm:ss",value:"Y-m-d H:i:s"},{label:"MM/DD/YYYY",value:"m/d/Y"},{label:"DD/MM/YYYY",value:"d/m/Y"},{label:"MMMM D, YYYY",value:"F j, Y"},{label:"HH:mm:ss",value:"H:i:s"},{label:"YYYY.M.D",value:"Y.n.j"},{label:"Day, MMMM D, YYYY",value:"l, F j, Y"},{label:"ddd, MMM D, YYYY",value:"D, M j, Y"},{label:"YYYY年M月D日 (曜日)",value:"Y年n月j日 (l)"}],C=e=>(0,o.createElement)("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)("text",{x:"0",y:"15",fontSize:"15","font-weight":"bold"},`H${e}`)),y=(e,t,l)=>{const o=document.createElement("canvas").getContext("2d");return o.font=`${t} ${l} `,o.measureText(e).width};function f(e){try{const t=e.replace(/<[^>]+>/g,"");return new URL(t),!0}catch(e){return!1}}function E({attributes:e,setAttributes:t,clientId:l}){const{headingContent:i,headingType:E,defaultHeadingSize:S,mobileHeadingSize:v,titleType:x,align:w,isVertical:P,padding_heading:Y,optionStyle:T,shadow_element:L,is_shadow:B,is_underLine:M,is_wrap:D,underLine_prop:R,bgColor_underLine:I,bgGradient_underLine:V,linkKind:N,menu_pos:F,is_title_menu:U,selectedSlug:A,selectedPageUrl:H,isBlank:O,dateValue:z,dateFormat:G,className:$}=e,j=(0,c.align_prm)(w,!0),W=(0,c.useIsIframeMobile)(),K=(0,p.useRef)(null),q=(0,g.useBlockProps)({ref:K,style:{position:U?"relative":"static",...j}}),J=(0,c.useElementStyleObject)(K,q.style);(0,p.useEffect)((()=>{if(J){const e=JSON.parse(J);if(0!==Object.keys(e).length){const l=e.backgroundColor;if(l){t({shadow_element:{...L,baseColor:l}});const e=(0,c.ShadowElm)({...L,baseColor:l});e&&t({shadow_result:e.style})}t({block_style:e})}}}),[J]);const Q=(0,p.useRef)(null),[X,Z]=(0,p.useState)(T);(0,p.useEffect)((()=>{let e;T?.copy_content&&(e=y(T.copy_content,T.font_style_copy?.fontSize,T.font_style_copy?.fontFamily));const l=T?.copy_content?{...X,copy_width:e}:X;t({optionStyle:l})}),[X]);const[ee,te]=(0,p.useState)("");(0,p.useEffect)((()=>{"site"===x||"catch"===x?(async()=>{try{const e=await r()({path:"/"});te("site"===x?e.name:e.description)}catch(e){console.error("Error fetching data:",e.message)}})():"date"===x&&ue((0,u.format)(G,i,(0,u.getSettings)()))}),[x]);const le=()=>{let e;$?.split(" ").includes("is-style-circle_marker")?e={styleName:"is-style-circle_marker",colorVal_circle:"var(--wp--preset--color--accent-1)",colorVal_second:"var(--wp--preset--color--accent-2)",circleScale:"3em",secondScale:"1.5em",second_opacity:.7,first_long:10,first_lat:-5,second_long:-10,second_lat:10,isSecond:!0}:$?.split(" ").includes("is-style-sub_copy")?(e={styleName:"is-style-sub_copy",alignment_copy:"top left",color_text_copy:"var(--wp--preset--color--content)",color_background_copy:"var(--wp--preset--color--accent-1)",copy_content:"SAMPLE",copy_width:0,font_style_copy:{fontSize:"16px",fontFamily:"Arial, sans-serif",fontWeight:"500",isItalic:!1},radius_copy:{topLeft:"10px",topRight:"10px",bottomRight:"0px",bottomLeft:"0px",value:"0px"},padding_copy:{top:"10px",left:"10px",bottom:"10px",right:"10px"},isIcon:!1,icon_style:{icon_name:"f030",icon_pos:"left",icon_size:"24px",icon_color:"#000",icon_space:"5px",icon_family:"Font Awesome 6 Free"}},se("SAMPLE")):e={},Z(e),Q.current=$;const l=$.replace(/\bauto_attr_change\b/,"").trim();t({isIdle:!1,className:l}),ce(!1)},oe=()=>{ie(!0),t({className:Q.current}),ce(!1)},[ne,ce]=(0,p.useState)(!1),[ae,ie]=(0,p.useState)(!1);(0,p.useEffect)((()=>{if(null!==Q.current){if(ae)return void ie(!1);if($?.includes("itmar_filter_title")||$?.includes("itmar_design_crumbs"))return void le();if(Q.current?.includes("is-style-default")||!Q.current?.includes("is-style"))return void le();ce(!0)}else Q.current=$}),[$]),function(e,t){(0,c.useDeepCompareEffect)((()=>{const l=document.getElementsByName("editor-canvas")[0];if(l){const n=l.contentDocument||l.contentWindow.document,c=new s.E;(0,_.F0)(c.collectStyles((0,o.createElement)(e,{attributes:t})));const a=c.getStyleTags().replace(/<style[^>]*>|<\/style>/g,""),i=n.createElement("style");return i.innerHTML=a,n.head.appendChild(i),()=>{n.head.removeChild(i)}}}),[t])}(a.B,e);const[re,se]=(0,p.useState)(T&&void 0!==T.copy_content?T.copy_content:"SAMPLE"),_e=(0,m.useSelect)((e=>e("core/block-editor").hasSelectedInnerBlock(l,!0)),[l]),[de,ge]=(0,p.useState)(!1);(0,m.useSelect)((e=>{const t=e("core/block-editor").getBlockParents(l);for(let l=0;l<t.length;l++){const o=e("core/block-editor").getBlock(t[l]);if(o.attributes?.is_menu){ge(!0);break}if(o.attributes?.is_submenu){ge(!0);break}}}),[l]),(0,p.useEffect)((()=>{t({isMenuItem:de})}),[de]);const pe=(0,g.useInnerBlocksProps)({className:`submenu-block ${_e?"visible":""} ${F.replace(/ /g,"_")} ${U?"mobile_virtical":"mobile_horizen"}`},{allowedBlocks:["itmar/design-group"],template:[["itmar/design-group",{is_submenu:!0},[["itmar/design-title",{headingType:"H3"}]]]],templateLock:!1}),[me,ue]=(0,p.useState)("date"===x?(0,u.format)(G,i,(0,u.getSettings)()):i),be="plaine"===x||"date"===x?(0,o.createElement)(g.RichText,{tagName:E,onChange:e=>{let t;t="object"==typeof e&&null!==e?e.text||"":e,ue(t)},onFocus:()=>{"date"===x&&ye(!0)},onBlur:()=>{"url"===N?f(me)?t({headingContent:me,selectedPageUrl:me}):((0,m.dispatch)("core/notices").createNotice("error",(0,n.__)("The input string is not in URL format.","block-collections"),{type:"snackbar",isDismissible:!0}),ue(i)):t({headingContent:me})},value:me,placeholder:(0,n.__)("Write Title text...","block-collections"),keepPlaceholderOnFocus:!0}):React.createElement(E.toLowerCase(),{},ee),[he,ke]=(0,p.useState)(H),[Ce,ye]=(0,p.useState)(!1);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(g.InspectorControls,{group:"settings"},(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Title Source Setting","block-collections")},(0,o.createElement)("div",{className:"itmar_title_type"},(0,o.createElement)(d.RadioControl,{label:(0,n.__)("Title type","block-collections"),selected:x,options:[{label:(0,n.__)("Plaine","block-collections"),value:"plaine"},{label:(0,n.__)("Date","block-collections"),value:"date"},{label:(0,n.__)("Site Title","block-collections"),value:"site"},{label:(0,n.__)("Chatch Phrase","block-collections"),value:"catch"}],onChange:e=>t({titleType:e}),help:(0,n.__)("The Site Title and Tagline provide the ability to display whatever you set in the WordPress General Settings.","block-collections")}),"date"===x&&(0,o.createElement)(d.SelectControl,{label:(0,n.__)("Date Format","block-collections"),value:G,options:k,onChange:e=>{t({dateFormat:e})}})),(0,o.createElement)("div",{className:"itmar_link_type"},(0,o.createElement)(d.RadioControl,{label:(0,n.__)("Link type","block-collections"),selected:N,options:[{label:(0,n.__)("None","block-collections"),value:"none"},{label:(0,n.__)("Fixed Page","block-collections"),value:"fixed"},{label:(0,n.__)("Archive Page","block-collections"),value:"archive"},{label:(0,n.__)("Free Link","block-collections"),value:"free"},{label:(0,n.__)("URL","block-collections"),value:"url"},{label:(0,n.__)("Sub Menu","block-collections"),value:"submenu"}],onChange:e=>{"url"===e?f(i)?(t({linkKind:e}),t({selectedPageUrl:i})):(0,m.dispatch)("core/notices").createNotice("error",(0,n.__)("The input string is not in URL format.","block-collections"),{type:"snackbar",isDismissible:!0}):t({linkKind:e})},help:(0,n.__)("You can select the type of URL to link to the title.","block-collections")})),"fixed"===N&&(0,o.createElement)(c.PageSelectControl,{selectedSlug:A,label:(0,n.__)("Select a fixed page to link to","block-collections"),homeUrl:"[home_url]",onChange:e=>{e&&t({selectedSlug:e.slug,selectedPageUrl:e.link})}}),"archive"===N&&(0,o.createElement)(c.ArchiveSelectControl,{selectedSlug:A,label:(0,n.__)("Select archive page to link to","block-collections"),homeUrl:"[home_url]",onChange:e=>{t({selectedSlug:e.slug,selectedPageUrl:e.link})}}),"free"===N&&(0,o.createElement)(d.TextControl,{label:(0,n.__)("Link URL","block-collections"),labelPosition:"top",value:he,onChange:e=>ke(e),onBlur:()=>{f(he)?t({selectedPageUrl:he}):((0,m.dispatch)("core/notices").createNotice("error",(0,n.__)("The input string is not in URL format.","block-collections"),{type:"snackbar",isDismissible:!0}),ke(H))}}),("fixed"===N||"archive"===N||"url"===N||"free"===N)&&(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Open in new tab","block-collections"),checked:O,onChange:e=>{t({isBlank:e})}}),"submenu"===N&&(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Submenu position settings","block-collections")},(0,o.createElement)(d.PanelRow,{className:"imgPos_row"},(0,o.createElement)("label",null,(0,n.__)("Menu Alignment","block-collections")),(0,o.createElement)(d.__experimentalAlignmentMatrixControl,{value:F,onChange:e=>{t({menu_pos:e})}})),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Based on title","block-collections"),checked:U,help:(0,n.__)("If unchecked, the parent menu will be used as the reference. If there is no parent menu, do not uncheck it.","block-collections"),onChange:e=>{t({is_title_menu:e})}})))),(0,o.createElement)(g.InspectorControls,{group:"styles"},(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Title settings","block-collections"),initialOpen:!0,className:"title_design_ctrl"},(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>t(W?{mobileHeadingSize:e}:{defaultHeadingSize:e}),label:W?(0,n.__)("Font Size(mobile)","block-collections"):(0,n.__)("Font Size(desk top)","block-collections"),value:W?v:S}),(0,o.createElement)(d.__experimentalBoxControl,{label:(0,n.__)("Padding","block-collections"),values:Y,onChange:e=>t({padding_heading:e}),units:h,allowReset:!0,resetValues:b}),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Is Shadow","block-collections"),checked:B,onChange:e=>{t({is_shadow:e})}}),B&&(0,o.createElement)(c.ShadowStyle,{shadowStyle:{...L},onChange:(e,l)=>{t({shadow_result:e.style}),t({shadow_element:l})}}),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Add an underline","block-collections"),checked:M,onChange:e=>{t({is_underLine:e})}}),M&&(0,o.createElement)(d.PanelBody,{title:(0,n.__)("UnderLine settings","block-collections"),initialOpen:!0,className:"title_design_ctrl"},(0,o.createElement)(d.PanelRow,{className:"distance_row"},(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>{const l={...R,height:e};t({underLine_prop:l})},label:(0,n.__)("Height","block-collections"),value:R.height}),(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>{const l={...R,width:e};t({underLine_prop:l})},label:(0,n.__)("Width","block-collections"),value:R.width}),(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>{const l={...R,distance:e};t({underLine_prop:l})},label:(0,n.__)("Distance","block-collections"),value:R.distance})),(0,o.createElement)(g.__experimentalPanelColorGradientSettings,{title:(0,n.__)("Under Line Color Setting","block-collections"),settings:[{colorValue:I,gradientValue:V,label:(0,n.__)("Choose Under Line color","block-collections"),onColorChange:e=>{t({bgColor_underLine:void 0===e?"":e})},onGradientChange:e=>{t({bgGradient_underLine:e})}}]}),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Animation on hover","block-collections"),checked:R.is_anime,onChange:e=>{const l={...R,is_anime:e};t({underLine_prop:l})}})),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Write vertically","block-collections"),checked:P,onChange:e=>{t({isVertical:e})}}),(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Wrap display","block-collections"),checked:D,onChange:e=>{t({is_wrap:e})}})),$?.split(" ").includes("is-style-circle_marker")&&(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Circle Marker Settings","block-collections"),initialOpen:!1,className:"title_design_ctrl"},(0,o.createElement)(g.__experimentalPanelColorGradientSettings,{title:(0,n.__)("Circle Color Setting","block-collections"),settings:[{colorValue:T&&T.colorVal_circle?T.colorVal_circle:"var(--wp--preset--color--accent-1)",gradientValue:T&&T.gradientVal_circle?T.gradientVal_circle:void 0,label:(0,n.__)("Choose Circle Background","block-collections"),onColorChange:e=>{Z((t=>({...t,colorVal_circle:e})))},onGradientChange:e=>{Z((t=>({...t,gradientVal_circle:e})))}}]}),(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>{Z((t=>({...t,circleScale:e})))},label:(0,n.__)("Circle Scale Setting","block-collections"),value:T&&T.circleScale?T.circleScale:"3em"}),(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Position Settings","block-collections"),initialOpen:!0,className:"title_design_ctrl"},(0,o.createElement)(d.RangeControl,{value:T&&T.first_lat?T.first_lat:10,label:(0,n.__)("Lateral direction","block-collections"),max:50,min:-30,step:1,onChange:e=>{Z((t=>({...t,first_lat:e})))},withInputField:!1}),(0,o.createElement)(d.RangeControl,{value:T&&T.first_long?T.first_long:10,label:(0,n.__)("Longitudinal direction","block-collections"),max:50,min:-30,step:1,onChange:e=>{Z((t=>({...t,first_long:e})))},withInputField:!1})),(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Second Circle Settings","block-collections"),initialOpen:!0},(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Second Circle","block-collections"),checked:!T||!T.isSecond||T.isSecond,onChange:e=>{Z((t=>({...t,isSecond:e})))}})),!(!T||!T.isSecond)&&T.isSecond&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(g.__experimentalPanelColorGradientSettings,{title:(0,n.__)("Circle Color Setting","block-collections"),settings:[{colorValue:T&&T.colorVal_second?T.colorVal_second:"var(--wp--preset--color--accent-2)",gradientValue:T&&T.gradientVal_second?T.gradientVal_second:void 0,label:(0,n.__)("Choose Circle Background","block-collections"),onColorChange:e=>{Z((t=>({...t,colorVal_second:e})))},onGradientChange:e=>{Z((t=>({...t,gradientVal_second:e})))}}]}),(0,o.createElement)(d.RangeControl,{value:T&&T.second_opacity?T.second_opacity:.7,label:(0,n.__)("Opacity","block-collections"),max:1,min:.1,step:.1,onChange:e=>{Z((t=>({...t,second_opacity:e})))},withInputField:!1}),(0,o.createElement)(d.__experimentalUnitControl,{dragDirection:"e",onChange:e=>{Z((t=>({...t,secondScale:e})))},label:(0,n.__)("Circle Scale Setting","block-collections"),value:T&&T.secondScale?T.secondScale:"1.5em"}),(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Position Settings","block-collections"),initialOpen:!0,className:"title_design_ctrl"},(0,o.createElement)(d.RangeControl,{value:T&&T.second_lat?T.second_lat:20,label:(0,n.__)("Lateral direction","block-collections"),max:50,min:-30,step:1,onChange:e=>{Z((t=>({...t,second_lat:e})))},withInputField:!1}),(0,o.createElement)(d.RangeControl,{value:T&&T.second_long?T.second_long:-10,label:(0,n.__)("Longitudinal direction","block-collections"),max:50,min:-30,step:1,onChange:e=>{Z((t=>({...t,second_long:e})))},withInputField:!1})))),$?.split(" ").includes("is-style-sub_copy")&&(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Sub Copy Settings","block-collections"),initialOpen:!1,className:"title_design_ctrl"},(0,o.createElement)(g.__experimentalPanelColorGradientSettings,{title:(0,n.__)("Copy Color Setting","block-collections"),settings:[{colorValue:T&&T.color_text_copy?T.color_text_copy:"var(--wp--preset--color--content)",label:(0,n.__)("Choose Text color","block-collections"),onColorChange:e=>{Z((t=>({...t,color_text_copy:e})))}},{colorValue:T&&T.color_background_copy?T.color_background_copy:"var(--wp--preset--color--accent-2)",gradientValue:T&&T.gradient_background_copy?T.gradient_background_copy:void 0,label:(0,n.__)("Choose Background color","block-collections"),onColorChange:e=>{Z((t=>({...t,color_background_copy:e})))},onGradientChange:e=>{Z((t=>({...t,gradient_background_copy:e})))}}]}),(0,o.createElement)(d.PanelRow,{className:"copyInfo_row"},(0,o.createElement)(d.TextControl,{label:(0,n.__)("Copy Text","block-collections"),labelPosition:"top",value:re,onChange:e=>{se(e),Z((t=>({...t,copy_content:e})))}})),(0,o.createElement)(d.PanelRow,{className:"copyInfo_row"},(0,o.createElement)("label",null,(0,n.__)("Copy Alignment","block-collections")),(0,o.createElement)(d.__experimentalAlignmentMatrixControl,{value:T&&T.alignment_copy?T.alignment_copy:"top left",onChange:e=>{Z((t=>({...t,alignment_copy:e})))}})),(0,o.createElement)(c.TypographyControls,{title:(0,n.__)("Typography","block-collections"),fontStyle:T&&T.font_style_copy?T.font_style_copy:{default_fontSize:"16px",mobile_fontSize:"12px",fontFamily:"Arial, sans-serif",fontWeight:"500",isItalic:!1},initialOpen:!1,isMobile:W,onChange:e=>{Z((t=>({...t,font_style_copy:e})))}}),(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Border Settings","block-collections"),initialOpen:!0},(0,o.createElement)(g.__experimentalBorderRadiusControl,{values:T&&T.radius_copy?T.radius_copy:{topLeft:"10px",topRight:"10px",bottomRight:"0px",bottomLeft:"0px",value:"0px"},onChange:e=>{Z((t=>({...t,radius_copy:"string"==typeof e?{value:e}:e})))}}),(0,o.createElement)(d.__experimentalBoxControl,{label:(0,n.__)("Padding settings","block-collections"),values:T&&T.padding_copy?T.padding_copy:{top:"10px",left:"10px",bottom:"10px",right:"10px"},onChange:e=>{Z((t=>({...t,padding_copy:e})))},units:h,allowReset:!0,resetValues:b})),(0,o.createElement)(d.PanelBody,{title:(0,n.__)("Icon settings","block-collections"),initialOpen:!0},(0,o.createElement)(d.ToggleControl,{label:(0,n.__)("Append icon","block-collections"),checked:!(!T||!T.isIcon)&&T.isIcon,onChange:e=>{Z((t=>({...t,isIcon:e})))}}),!(!T||!T.isIcon)&&T.isIcon&&(0,o.createElement)(c.IconSelectControl,{iconStyle:T&&T.icon_style?T.icon_style:{icon_name:"f030",icon_pos:"left",icon_size:"24px",icon_color:"var(--wp--preset--color--content)",icon_space:"5px"},setPosition:!0,onChange:e=>{Z((t=>({...t,icon_style:e})))}})))),(0,o.createElement)(g.BlockControls,null,(0,o.createElement)(g.AlignmentToolbar,{value:w,onChange:e=>{t({align:e})}}),(0,o.createElement)(d.ToolbarDropdownMenu,{label:(0,n.__)("Change heading level","block-collections"),icon:C(parseInt(E.slice(1),10)),controls:[1,2,3,4,5,6].map((e=>({icon:C(e),title:`Heading ${e}`,isActive:E===`H${e}`,onClick:()=>t({headingType:`H${e}`})})))})),ne&&(0,o.createElement)(d.Modal,{title:(0,n.__)("Confirm Deletion","block-collections"),onRequestClose:oe},(0,o.createElement)("p",null,(0,n.__)("Changing a style resets the style-specific settings. Are you sure?","block-collections")),(0,o.createElement)(d.Button,{variant:"primary",onClick:le},(0,n.__)("Yes, Change","block-collections")),(0,o.createElement)(d.Button,{variant:"secondary",onClick:oe},(0,n.__)("Cancel","block-collections"))),(0,o.createElement)("div",{...q},(0,o.createElement)(a.B,{attributes:e},be),"submenu"===N&&(0,o.createElement)("div",{...pe}),Ce&&(0,o.createElement)(d.Modal,{title:(0,n.__)("Select Date and Time","block-collections"),onRequestClose:()=>ye(!1)},(0,o.createElement)(d.DateTimePicker,{currentDate:z,onChange:e=>{t({headingContent:e});const l=(0,u.format)(G,e,(0,u.getSettings)());ue(l),ye(!1)}}),(0,o.createElement)(d.Button,{variant:"primary",onClick:()=>ye(!1)},"Close"))))}}}]);